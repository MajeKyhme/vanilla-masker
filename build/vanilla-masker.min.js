!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.VMasker=b()}(this,function(){var a=[9,16,17,18,36,37,38,39,40,91,92,93,109],b=function(b){for(var c=0,d=a.length;c<d;c++)if(b==a[c])return!1;return!0},c=function(a){return a=a||{},a={delimiter:a.delimiter||".",lastOutput:a.lastOutput,precision:a.hasOwnProperty("precision")?a.precision:2,separator:a.separator||",",showSignal:a.showSignal,suffixUnit:a.suffixUnit&&" "+a.suffixUnit.replace(/[\s]/g,"")||"",unit:a.unit&&a.unit.replace(/[\s]/g,"")+" "||"",zeroCents:a.zeroCents},a.moneyPrecision=a.zeroCents?0:a.precision,a},d=function(a,b,c){for(;b<a.length;b++)"9"!==a[b]&&"A"!==a[b]&&"S"!==a[b]||(a[b]=c);return a},e=function(a,b){return"modalSignupSsn"!=b.id&&"UserSsn"!=b.id||189!=a},f=function(a){this.elements=a};f.prototype.unbindElementToMask=function(){for(var a=0,b=this.elements.length;a<b;a++)this.elements[a].lastOutput="",this.elements[a].onkeyup=!1,this.elements[a].onkeydown=!1,this.elements[a].value.length&&(this.elements[a].value=this.elements[a].value.replace(/\D/g,""))},f.prototype.bindElementToMask=function(a){for(var c=this,d=function(d){d=d||window.event;var f=d.target||d.srcElement;b(d.keyCode)&&e(d.keyCode,f)&&setTimeout(function(){c.opts.lastOutput=f.lastOutput;var b=f.selectionEnd;f.value=g[a](f.value,c.opts);var d=b+(f.value.length-f.lastOutput.length)-1,e=b-(f.lastOutput.length-f.value.length)+1;f.value.length<f.lastOutput.length&&f.setSelectionRange(e,e),f.value.length>f.lastOutput.length&&f.setSelectionRange(d,d),f.lastOutput=f.value,f.setSelectionRange&&c.opts.suffixUnit&&f.setSelectionRange(f.value.length,f.value.length-c.opts.suffixUnit.length)},0)},f=0,h=this.elements.length;f<h;f++){var i=document.getElementsByTagName("BODY")[0].getAttribute("data-user-environment");this.elements[f].lastOutput="","desktop"===i?this.elements[f].onkeydown=d:this.elements[f].onkeyup=d,this.elements[f].value.length&&(this.elements[f].value=g[a](this.elements[f].value,this.opts),this.elements[f].lastOutput=this.elements[f].value)}},f.prototype.maskMoney=function(a){this.opts=c(a),this.bindElementToMask("toMoney")},f.prototype.maskNumber=function(){this.opts={},this.bindElementToMask("toNumber")},f.prototype.maskAlphaNum=function(){this.opts={},this.bindElementToMask("toAlphaNumeric")},f.prototype.maskPattern=function(a){this.opts={pattern:a},this.bindElementToMask("toPattern")},f.prototype.unMask=function(){this.unbindElementToMask()};var g=function(a){if(!a)throw new Error("VanillaMasker: There is no element to bind.");var b="length"in a?a.length?a:[]:[a];return new f(b)};return g.toMoney=function(a,b){if(b=c(b),b.zeroCents){b.lastOutput=b.lastOutput||"";var d="("+b.separator+"[0]{0,"+b.precision+"})",e=new RegExp(d,"g"),f=a.toString().replace(/[\D]/g,"").length||0,g=b.lastOutput.toString().replace(/[\D]/g,"").length||0;a=a.toString().replace(e,""),f<g&&(a=a.slice(0,a.length-1))}var h=parseInt(a.toString().replace(/[\D]/g,""),10).toString(),i=new RegExp("^(0|\\"+b.delimiter+")"),j=new RegExp("(\\"+b.separator+")$"),k=h.substr(0,h.length-b.moneyPrecision),l=k.substr(0,k.length%3),m=new Array(b.precision+1).join("0");if(isNaN(h))return"";k=k.substr(k.length%3,k.length);for(var n=0,o=k.length;n<o;n++)n%3==0&&(l+=b.delimiter),l+=k[n];l=l.replace(i,""),l=l.length?l:"0";var p="";if(!0===b.showSignal&&(p=a<0||a.startsWith&&a.startsWith("-")?"-":""),!b.zeroCents){var q=h.length-b.precision,r=h.substr(q,b.precision),s=r.length;m=(m+r).slice(-(b.precision>s?b.precision:s))}return(b.unit+p+l+b.separator+m).replace(j,"")+b.suffixUnit},g.toPattern=function(a,b){var c,e="object"==typeof b?b.pattern:b,f=e.replace(/\W/g,""),g=e.split(""),h=a.toString().replace(/\W/g,""),i=h.replace(/\W/g,""),j=0,k=g.length,l="object"==typeof b?b.placeholder:void 0;for(c=0;c<k;c++){if(j>=h.length){if(f.length==i.length)return g.join("");if(void 0!==l&&f.length>i.length)return d(g,c,l);break}if("9"===g[c]&&h[j].match(/[0-9]/)||"A"===g[c]&&h[j].match(/[a-zA-Z]/)||"S"===g[c]&&h[j].match(/[0-9a-zA-Z]/))g[c]=h[j++];else if("9"===g[c]||"A"===g[c]||"S"===g[c])return void 0!==l?d(g,c,l).join(""):g.slice(0,c).join("")}return g.join("").substr(0,c)},g.toNumber=function(a){return a.toString().replace(/(?!^-)[^0-9]/g,"")},g.toAlphaNumeric=function(a){return a.toString().replace(/[^a-z0-9 ]+/i,"")},g});